(function(d){var b;function a(l){var k=l.match((/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/));return k&&k[2].length===11?k[2]:false}function g(k){var l=a(k);if(k&&l){k="https://www.youtube.com/embed/"+a(k)}return k}function f(l,k,m){var n;if(m){n='width="'+l+'" height="'+k+'"';return'<iframe src="'+m+'" '+n+' frameborder="0" allowfullscreen class="embed-responsive-item">&nbsp;</iframe>'}}function i(){var m,n="",r=d("#youtubeAutoplay").is(":checked"),l=d("#youtubeREL").is(":checked"),p=d("#youtubeHD").is(":checked"),o=d("#youtubeWidth").val(),k=d("#youtubeHeight").val(),q=g(d("#youtubeID").val());if(l){n+="?rel=1"}else{n+="?rel=0"}if(p){n+="&hd=1"}else{n+="&hd=0"}if(r){n+="&autoplay=1"}if(q){m=f(o,k,q+n)}return m}function e(){d("#preview").html(f(750,315,g(d("#youtubeID").val())))}function j(k){clearTimeout(b);b=setTimeout(e,k||1000)}function c(){var k=i();if(k){parent.tinymce.activeEditor.insertContent(k)}parent.tinymce.activeEditor.windowManager.close()}function h(){if(d("#preview").length){d("#youtubeID").keypress(function(){j()}).change(function(){j(100)})}}d(function(){var k={youtubeurl:parent.tinymce.util.I18n.translate("Youtube URL"),youtubeID:parent.tinymce.util.I18n.translate("Youtube ID"),youtubeWidth:parent.tinymce.util.I18n.translate("width"),youtubeHeight:parent.tinymce.util.I18n.translate("height"),youtubeAutoplay:parent.tinymce.util.I18n.translate("autoplay"),youtubeHD:parent.tinymce.util.I18n.translate("HD video"),youtubeREL:parent.tinymce.util.I18n.translate("Related video"),cancel:parent.tinymce.util.I18n.translate("cancel"),Insert:parent.tinymce.util.I18n.translate("Insert")};d.get("view/forms.html",function(l){d("#template-container").append(Mustache.render(l,k));h();d("#insert-btn").on("click",c);d("#close-btn").on("click",function(){parent.tinymce.activeEditor.windowManager.close()})})})}(jQuery));